<%= form_for([@event, @session, @table, @registration_table]) do |f| %>
    <% if @registration_table.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(@registration_table.errors.count, "error") %> prohibited this registration_table from being
            saved:</h2>

          <ul>
            <% @registration_table.errors.full_messages.each do |message| %>
                <li><%= message %></li>
            <% end %>
          </ul>
        </div>
    <% end %>
    <!-- if not admin then they can just confirm -->

    <div class="field">
      <%= f.label :table_id %>: <%= @table.scenario.long_name %>
      <%= f.hidden_field :table_id, :value => @table.id %>
    </div>

    <%# need the UserEvent for the current user %>
    <% if admin? %>
        <div class="field">

          <%= f.select :user_event_id, options_for_select(@possible_players.map { |user_event| [user_event.user.name, user_event.id] }.to_h, gm_id), include_blank: 'Select User...', :selected => user_event.id  %>
        </div>
    <% else %>
        <div class="field">
          <%= f.label :user_event_id %>: <%= @user_event.user.name %>
          <%= f.hidden_field :user_event_id, :value => @user_event.id %>
        </div>
    <% end %>
    <div class="actions">
      <%= f.submit "Signup for #{@table.scenario.long_name}", :class => 'btn btn-warning' %>
    </div>
<% end %>
